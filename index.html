<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–°–∞–ª—é—Ç + –¢–µ–∫—Å—Ç</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<div class="container">
    <h1 id="clickText">–ù–∞–∂–º–∏ üëá</h1>
    <img id="image" class="image" src="cat1.jpg">
    <div id="message" class="message"></div>
</div>

<div id="fireworks-container"></div>

<script>
const screens = [
    { text: "–° –¥–Ω–µ–º —Ä–æ–∂–¥–µ–Ω–∏—è, –ø–æ–¥—Ä—É–≥–∞–∞–∞!!!", img: "https://i.yapx.cc/c9yow.jpg" },
    { text: "–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º –æ—Ç –ü–æ–ª–∏–Ω—ã –∏ –¢–∏—Ö–æ–ø—Ä—ã–≥–∞", img: "https://i.yapx.cc/c9yoz.jpg" },
    { text: "–ñ–µ–ª–∞–µ–º —Ç–µ–±–µ —Å—á–∞—Å—Ç—å—è –∏ —É—Å–ø–µ—Ö–∞ –ø–æ –∂–∏–∑–Ω–∏", img: "https://i.yapx.cc/c9yor.jpg" },
    { text: "–£ —Ç–µ–±—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–æ–ª—É—á–∏—Ç—Å—è –¥–æ—Å—Ç–∏—á—å –≤—Å–µ—Ö —Ç–≤–æ–∏—Ö —Ü–µ–ª–µ–π!!", img: "https://i.yapx.cc/c9you.jpg" },
    { text: "–ú—ã —É–≤–µ—Ä–µ–Ω—ã, —Ç–µ–±—è –∂–¥–µ—Ç –±–æ–ª—å—à–æ–µ –±—É–¥—É—â–µ–µ (–∏ –º–Ω–æ–≥–æ –¥–µ–Ω—è–∫)", img: "https://i.yapx.cc/c9yov.png" },
    { text: "–¢—ã —Å–∞–º–∞—è –ª—É—á—à–∞—è üíñ", img: "https://i.yapx.cc/c9yoy.jpg" }
];

let current = 0;
let isAnimating = false;

const image = document.getElementById("image");
const message = document.getElementById("message");
const clickText = document.getElementById("clickText");
const fireworksContainer = document.getElementById("fireworks-container");

image.addEventListener("click", () => {
    if (isAnimating) return;
    isAnimating = true;

    clickText.style.display = "none";
    image.style.display = "none";

    message.innerText = screens[current].text;
    message.classList.remove("animate");
    void message.offsetWidth;
    message.classList.add("animate");

    launchFireworks();
});

message.addEventListener("animationend", () => {
    current = (current + 1) % screens.length;
    image.src = screens[current].img;

    message.classList.remove("animate");

    clickText.style.display = "block";
    image.style.display = "block";

    isAnimating = false;
});

function launchFireworks() {
    const positions = [window.innerWidth*0.4, window.innerWidth*0.6];
    const fireworkHeight = window.innerHeight * 0.4; // —Ç–æ—á–∫–∞ –≤–∑—Ä—ã–≤–∞
    const riseDuration = 600; // –≤—Ä–µ–º—è –ø–æ–¥—ä–µ–º–∞ –≤ –º—Å

    positions.forEach(x => {
        const firework = document.createElement("div");
        firework.className = "firework";
        firework.style.left = x + "px";
        firework.style.bottom = "0px"; // —Å—Ç–∞—Ä—Ç–æ–≤–∞—è –ø–æ–∑–∏—Ü–∏—è —Å–Ω–∏–∑—É
        fireworksContainer.appendChild(firework);

        // –î–∞–µ–º –±—Ä–∞—É–∑–µ—Ä—É –æ—Ç—Ä–µ–Ω–¥–µ—Ä–∏—Ç—å —à–∞—Ä–∏–∫ –Ω–∞ —Å—Ç–∞—Ä—Ç–µ
        requestAnimationFrame(() => {
            firework.style.transition = `bottom ${riseDuration}ms ease-out`;
            firework.style.bottom = fireworkHeight + "px";

            // –í–∑—Ä—ã–≤ —á–µ—Ä–µ–∑ riseDuration
            setTimeout(() => {
                const rect = firework.getBoundingClientRect();
                explode(rect.left + rect.width/2, rect.top + rect.height/2);
                firework.remove();
            }, riseDuration);
        });
    });
}

function explode(centerX, centerY) {
    const colors = ["#ff0040","#ff8000","#ffff00","#00ffcc","#ff00ff","#ffffff"];
    for (let i = 0; i < 30; i++) {
        const particle = document.createElement("div");
        particle.className = "particle";
        particle.style.backgroundColor = colors[Math.floor(Math.random()*colors.length)];
        particle.style.left = centerX + "px";
        particle.style.top = centerY + "px";

        const angle = Math.random() * 2 * Math.PI;
        const distance = 50 + Math.random() * 100;
        particle.style.setProperty('--dx', Math.cos(angle) * distance + "px");
        particle.style.setProperty('--dy', Math.sin(angle) * distance + "px");

        fireworksContainer.appendChild(particle);
        setTimeout(() => particle.remove(), 1500);
    }
}
</script>

</body>
</html>
